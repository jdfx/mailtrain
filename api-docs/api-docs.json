{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Mailtrain API spec",
    "description": "API specification for Mailtrain",
    "termsOfService": "http://swagger.io/terms/"
  },
  "host": "192.168.10.10:3000",
  "basePath": "/api",
  "tags" : [
    {"name": "Tag1",
      "description": "API for something"
    }
  ],
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/lists": {
      "get": {
        "tags": ["Lists"],
        "description": "Get all lists",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                      "lists": {
                        "type" : "object",
                        "properties" : {
                          "id": {
                            "type": "integer"
                          },
                          "name" : {
                            "type": "string"
                          },
                          "subscribers" : {
                            "type": "integer"
                          },
                          "segements": {
                              "type": "array",
                              "items": {
                                "type": "object"
                              }
                          }
                        }
                      }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/list": {
      "post": {
        "tags": ["Lists"],
        "description": "Create a list",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "name",
            "in": "formData",
            "description": "The name of the list",
            "required": true,
            "type": "string",
            "default": "This is a Mailtrain list"
          },
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "id" : {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/subscribe/{listId}": {
      "post": {
        "tags": ["Subscriptions"],
        "description": "Add a subscriber to a list",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "listId",
            "in": "path",
            "description": "The ID of the list to subscribe to",
            "required": true,
            "type": "string",
            "default": "SJbyh3uZZ"
          },
          {
            "name": "EMAIL",
            "in": "formData",
            "description": "The email of the subscriber",
            "required": true,
            "type": "string",
            "default": "info@mailtrain.org"
          },
          {
            "name": "FIRST_NAME",
            "in": "formData",
            "description": "The firstname of the subscriber",
            "required": true,
            "type": "string",
            "default": "Winston"
          },
          {
            "name": "LAST_NAME",
            "in": "formData",
            "description": "The lastname of the subscriber",
            "required": true,
            "type": "string",
            "default": "Churchill"
          },
          {
            "name": "TIMEZONE",
            "in": "formData",
            "description": "The timezone of the subscriber",
            "required": true,
            "type": "string",
            "default": "UTC"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type": "object",
                  "properties" : {
                    "id": {
                      "type" : "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/unsubscribe/{listId}": {
      "post": {
        "tags": ["Subscriptions"],
        "description": "Add a subscriber to a list",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "listId",
            "in": "path",
            "description": "The ID of the list to subscribe to",
            "required": true,
            "type": "string",
            "default": "SJbyh3uZZ"
          },
          {
            "name": "EMAIL",
            "in": "formData",
            "description": "The email of the subscriber",
            "required": true,
            "type": "string",
            "default": "info@mailtrain.org"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object",
                  "properties": {
                    "unsubscribed" : {
                      "type" : "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/delete/{listId}": {
      "post": {
        "tags": ["Subscriptions"],
        "description": "Add a subscriber to a list",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "listId",
            "in": "path",
            "description": "The ID of the list to subscribe to",
            "required": true,
            "type": "string",
            "default": "SJbyh3uZZ"
          },
          {
            "name": "EMAIL",
            "in": "formData",
            "description": "The email of the subscriber",
            "required": true,
            "type": "string",
            "default": "info@mailtrain.org"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "deleted": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/field/{listId}": {
      "post": {
        "tags": ["Fields"],
        "description": "Add a field to a list",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "listId",
            "in": "path",
            "description": "The ID of the list to subscribe to",
            "required": true,
            "type": "string",
            "default": "SJbyh3uZZ"
          },
          {
            "name": "NAME",
            "in": "formData",
            "description": "The name of the custom field",
            "required": true,
            "type": "string",
            "default": "Test field"
          },
          {
            "name": "DEFAULT",
            "in": "formData",
            "description": "Default merge tag value",
            "required": true,
            "type": "string",
            "default": "test"
          },
          {
            "name": "TYPE",
            "in": "formData",
            "description": "Field type",
            "required": true,
            "type": "string",
            "default": "text"
          },
          {
            "name": "GROUP",
            "in": "formData",
            "description": "Field type",
            "required": false,
            "type": "number"
          },
          {
            "name": "GROUP_TEMPLATE",
            "in": "formData",
            "description": "Field type",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object",
                  "properties": {
                    "id": {
                      "type" : "integer"
                    },
                    "tag": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/templates": {
      "get": {
        "tags": ["Templates"],
        "description": "Get all templates",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "templates": {
                      "type" : "object",
                      "properties" : {
                          "id": {
                            "type": "integer"
                          },
                        "name": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/campaign": {
      "post": {
        "tags": ["Campaign"],
        "description": "Create a campaign",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "name",
            "in": "formData",
            "description": "The name of the campaign",
            "required": true,
            "type": "string",
            "default": "Mailtrain campaign"
          },
          {
            "name": "description",
            "in": "formData",
            "description": "Describe the campaign",
            "required": true,
            "type": "string",
            "default": "This is a Mailtrain campaign"
          },
          {
            "name": "tracking-disabled",
            "in": "formData",
            "description": "Tracking flag",
            "required": true,
            "type": "integer",
            "default": "1"
          },
          {
            "name": "list",
            "in": "formData",
            "description": "The list and the segment ID's in this format - listID:Segment (segment portion is optional, can just be a single Int)",
            "required": true,
            "type": "string",
            "default": "2:3"
          },
          {
            "name": "type",
            "in": "formData",
            "description": "Campaign type (1 - Normal, 2 - RSS, 4 - Triggered",
            "required": true,
            "type": "integer",
            "default": "4"
          },
          {
            "name": "template",
            "in": "formData",
            "description": "Template ID",
            "required": true,
            "type": "integer",
            "default": "1"
          },
          {
            "name": "source-url",
            "in": "formData",
            "description": "You can give it a source URL, a HTML page for Normal and Triggered campaigns, or an RSS feed for RSS campaigns.",
            "required": false,
            "type": "string"
          },
          {
            "name": "from",
            "in": "formData",
            "description": "From name",
            "required": true,
            "type": "string",
            "default": "mailtrain"
          },
          {
            "name": "address",
            "in": "formData",
            "description": "From address",
            "required": true,
            "type": "string",
            "default": "info@mailtrain.org"
          },
          {
            "name": "reply-to",
            "in": "formData",
            "description": "Reply to address",
            "required": true,
            "type": "string",
            "default": "info@mailtrain.org"
          },
          {
            "name": "subject",
            "in": "formData",
            "description": "Subject for the campaign",
            "required": true,
            "type": "string",
            "default": "This is a Mailtrain campaign"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object",
                  "properties": {
                    "id": {
                      "type" : "integer"
                    },
                    "tag": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/blacklist/get": {
      "get": {
        "tags": ["Blacklist"],
        "description": "Add an email to the global blacklist",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "start",
            "in": "query",
            "description": "Start position (optional, default 0)",
            "required": false,
            "type": "integer",
            "default": "0"
          },
          {
            "name": "limit",
            "in": "query",
            "description": "limit emails count in response (optional, default 10000)",
            "required": false,
            "type": "integer",
            "default": "10000"
          },
          {
            "name": "search",
            "in": "query",
            "description": " filter by part of email (optional, default '')",
            "required": true,
            "type": "string",
            "default": ""
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object",
                  "properties": {
                    "total": {
                      "type" :"integer"
                    },
                    "start": {
                      "type" :"integer"
                    },
                    "limit": {
                      "type" :"integer"
                    },
                    "emails": {
                      "type" :"array"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/blacklist/add": {
      "post": {
        "tags": ["Blacklist"],
        "description": "Add an email to the global blacklist",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "EMAIL",
            "in": "formData",
            "description": "The email of the subscriber",
            "required": true,
            "type": "string",
            "default": "badperson@mailtrain.org"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object"
                }
              }
            }
          }
        }
      }
    },
    "/blacklist/delete": {
      "post": {
        "tags": ["Blacklist"],
        "description": "Delete an email to the global blacklist",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref":"#/parameters/access_token"
          },
          {
            "name": "EMAIL",
            "in": "formData",
            "description": "The email of the subscriber",
            "required": true,
            "type": "string",
            "default": "badperson@mailtrain.org"
          }
        ],
        "responses": {
          "200": {
            "description": "Success response",
            "schema": {
              "properties": {
                "data": {
                  "type" : "object"
                }
              }
            }
          }
        }
      }
    }
  },
  "parameters":{
    "access_token": {
      "name": "access_token",
      "in": "query",
      "description": "Access token",
      "required": true,
      "type": "string",
      "default": "f98d9e47aba66af7236debc881986fd5d8365b5f"
    }
  },
  "definitions": {

  }
}